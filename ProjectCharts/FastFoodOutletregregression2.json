{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
    "text": "Obesity and Fast Food Outlet Density",
    "fontSize": 18,
    "subtitle": "By Local Authority. Sources: Public Health England and Office for Health Improvement and Disparities",
    "subtitleFontStyle": "italic",
    "subtitlePadding": 4,
    "subtitleFontSize": 14,
    "anchor": "start",
    "color": "black"
  },
  "width": 550,
  "height": 550,
  "view": {"stroke": "transparent"},
  "data": {
    "url": "https://raw.githubusercontent.com/jesme00/jesme00.github.io/main/FastFoodDensityAndObesity.csv",
    "format":{"type":"csv"}
  },

  "layer": [
    {
      "selection": {
        "picked": {
          "empty": "none",
          "bind": {
            "Area Name": {
              "input": "select",
              "options": [
                "No local authority selected",
                "Adur",
"Allerdale",
"Amber Valley",
"Arun",
"Ashfield",
"Ashford",
"Babergh",
"Barking and Dagenham",
"Barnet",
"Barnsley",
"Barrow-in-Furness",
"Basildon",
"Basingstoke and Deane",
"Bassetlaw",
"Bath and North East Somerset",
"Bedford",
"Bexley",
"Birmingham",
"Blaby",
"Blackburn with Darwen",
"Blackpool",
"Bolsover",
"Bolton",
"Boston",
"Bournemouth, Christchurch and Poole",
"Bracknell Forest",
"Bradford",
"Braintree",
"Breckland",
"Brent",
"Brentwood",
"Brighton and Hove",
"Bristol",
"Broadland",
"Bromley",
"Bromsgrove",
"Broxbourne",
"Broxtowe",
"Buckinghamshire",
"Burnley",
"Bury",
"Calderdale",
"Cambridge",
"Camden",
"Cannock Chase",
"Canterbury",
"Carlisle",
"Castle Point",
"Central Bedfordshire",
"Charnwood",
"Chelmsford",
"Cheltenham",
"Cherwell",
"Cheshire East",
"Cheshire West and Chester",
"Chesterfield",
"Chichester",
"Chorley",
"City of London",
"Colchester",
"Copeland",
"Cornwall",
"Cotswold",
"County Durham",
"Coventry",
"Craven",
"Crawley",
"Croydon",
"Dacorum",
"Darlington",
"Dartford",
"Derby",
"Derbyshire Dales",
"Doncaster",
"Dorset",
"Dover",
"Dudley",
"Ealing",
"East Cambridgeshire",
"East Devon",
"East Hampshire",
"East Hertfordshire",
"East Lindsey",
"East Riding of Yorkshire",
"East Staffordshire",
"East Suffolk",
"Eastbourne",
"Eastleigh",
"Eden",
"Elmbridge",
"Enfield",
"Epping Forest",
"Epsom and Ewell",
"Erewash",
"Exeter",
"Fareham",
"Fenland",
"Folkestone & Hythe",
"Forest of Dean",
"Fylde",
"Gateshead",
"Gedling",
"Gloucester",
"Gosport",
"Gravesham",
"Great Yarmouth",
"Greenwich",
"Guildford",
"Hackney",
"Halton",
"Hambleton",
"Hammersmith and Fulham",
"Harborough",
"Haringey",
"Harlow",
"Harrogate",
"Harrow",
"Hart",
"Hartlepool",
"Hastings",
"Havant",
"Havering",
"Herefordshire",
"Hertsmere",
"High Peak",
"Hillingdon",
"Hinckley and Bosworth",
"Horsham",
"Hounslow",
"Huntingdonshire",
"Hyndburn",
"Ipswich",
"Isle of Wight",
"Isles of Scilly",
"Islington",
"Kensington and Chelsea",
"King's Lynn and West Norfolk",
"Kingston upon Hull",
"Kingston upon Thames",
"Kirklees",
"Knowsley",
"Lambeth",
"Lancaster",
"Leeds",
"Leicester",
"Lewes",
"Lewisham",
"Lichfield",
"Lincoln",
"Liverpool",
"Luton",
"Maidstone",
"Maldon",
"Malvern Hills",
"Manchester",
"Mansfield",
"Medway",
"Melton",
"Mendip",
"Merton",
"Mid Devon",
"Mid Suffolk",
"Mid Sussex",
"Middlesbrough",
"Milton Keynes",
"Mole Valley",
"New Forest",
"Newark and Sherwood",
"Newcastle upon Tyne",
"Newcastle-under-Lyme",
"Newham",
"North Devon",
"North East Derbyshire",
"North East Lincolnshire",
"North Hertfordshire",
"North Kesteven",
"North Lincolnshire",
"North Norfolk",
"North Northamptonshire",
"North Somerset",
"North Tyneside",
"North Warwickshire",
"North West Leicestershire",
"Northumberland",
"Norwich",
"Nottingham",
"Nuneaton and Bedworth",
"Oadby and Wigston",
"Oldham",
"Oxford",
"Pendle",
"Peterborough",
"Plymouth",
"Portsmouth",
"Preston",
"Reading",
"Redbridge",
"Redcar and Cleveland",
"Redditch",
"Reigate and Banstead",
"Ribble Valley",
"Richmond upon Thames",
"Richmondshire",
"Rochdale",
"Rochford",
"Rossendale",
"Rother",
"Rotherham",
"Rugby",
"Runnymede",
"Rushcliffe",
"Rushmoor",
"Rutland",
"Ryedale",
"Salford",
"Sandwell",
"Scarborough",
"Sedgemoor",
"Sefton",
"Selby",
"Sevenoaks",
"Sheffield",
"Shropshire",
"Slough",
"Solihull",
"Somerset West and Taunton",
"South Cambridgeshire",
"South Derbyshire",
"South Gloucestershire",
"South Hams",
"South Holland",
"South Kesteven",
"South Lakeland",
"South Norfolk",
"South Oxfordshire",
"South Ribble",
"South Somerset",
"South Staffordshire",
"South Tyneside",
"Southampton",
"Southend-on-Sea",
"Southwark",
"Spelthorne",
"St Albans",
"St. Helens",
"Stafford",
"Staffordshire Moorlands",
"Stevenage",
"Stockport",
"Stockton-on-Tees",
"Stoke-on-Trent",
"Stratford-on-Avon",
"Stroud",
"Sunderland",
"Surrey Heath",
"Sutton",
"Swale",
"Swindon",
"Tameside",
"Tamworth",
"Tandridge",
"Teignbridge",
"Telford and Wrekin",
"Tendring",
"Test Valley",
"Tewkesbury",
"Thanet",
"Three Rivers",
"Thurrock",
"Tonbridge and Malling",
"Torbay",
"Torridge",
"Tower Hamlets",
"Trafford",
"Tunbridge Wells",
"Uttlesford",
"Vale of White Horse",
"Wakefield",
"Walsall",
"Waltham Forest",
"Wandsworth",
"Warrington",
"Warwick",
"Watford",
"Waverley",
"Wealden",
"Welwyn Hatfield",
"West Berkshire",
"West Devon",
"West Lancashire",
"West Lindsey",
"West Northamptonshire",
"West Oxfordshire",
"West Suffolk",
"Westminster",
"Wigan",
"Wiltshire",
"Winchester",
"Windsor and Maidenhead",
"Wirral",
"Woking",
"Wokingham",
"Wolverhampton",
"Worcester",
"Worthing",
"Wychavon",
"Wyre",
"Wyre Forest",
"York"
              ],
              "name": "Select a local authority: "
            }
          },
          "type": "single",
          "fields": ["Area Name"]
        },
        "grid": {
          "type": "interval",
          "bind": "scales",
          "on": "[mousedown, window:mouseup] > window:mousemove!",
          "translate": "[mousedown, window:mouseup] > window:mousemove!",
          "zoom": "wheel!",
          "resolve": "global"
        }
      },
      "mark": {"type": "point", "filled": true},
      "encoding": {
        "x": {
          "field": "Outlets per 100,000 population",
          "type": "quantitative",
          "scale": {"domain": [20, 240]},
          "title": "Fast Food Density (outlets per 100,000)"
        },
        "y": {
          "field": "Obesity Rate",
          "type": "quantitative",
          "scale": {"domain": [43, 78]},
          "title": "% adults classified as overweight or obese"
        },
        "color": {
          "value": "#5bbb07",
          "condition": {
            "field": "Local Area",
            "selection": "picked",
            "type": "nominal",
            "legend": null,
            "scale": {"scheme": "reds"}
          }
        },
        
        "size": {
          "value": 120,
          "condition": {"value": 250, "selection": "picked"}
          },
        "opacity": {
          "value": 0.5,
          "condition": {"value": 1, "selection": "picked"}
        },
        "tooltip": [
          {
            "field": "Obesity Rate",
            "type": "quantitative",
            "title": "% Overweight/Obese Adults"
          },
          {
            "field": "Outlets per 100,000 population",
            "type": "quantitative",
            "title": "Outlets per 100,000"
          },
          {"field": "Area Name", "type": "nominal", "title": "Local Authority"}
        ]
      }
    },
    {
      "mark": {"type": "line", "color": "#ce1f1fb2"},
      "transform": [
        {
          "regression": "Obesity Rate",
          "on": "Outlets per 100,000 population",
          "extent": [20, 240]
        }
      ],
      "encoding": {
        "x": {
          "field": "Outlets per 100,000 population",
          "type": "quantitative"
        },
        "y": {"field": "Obesity Rate", "type": "quantitative"}
      }
    },
    {
      "transform": [
        {
          "regression": "Obesity Rate",
          "on": "Outlets per 100,000 population",
          "params": true
        },
        {"calculate": "'RÂ²: '+format(datum.rSquared, '.2f')", "as": "R2"}
      ],
      "mark": {
        "type": "text",
        "color": "#ce1f1fb2",
        "fontWeight": "bold",
        "fontStyle": "normal",
        "x": "width",
        "align": "right",
        "y": 20,
        "size":14
      },
      "encoding": {"text": {"type": "nominal", "field": "R2"}}
    }
  ]
}
