<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Title for the page -->
    <title>Document</title>

    <!-- Link to my style sheet -->
    <link rel="stylesheet" href="index.css">

    <!--The next three lines allow the Vega embed-->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
</head>


<body>
<a href="https://jesme00.github.io/homeworkportfolio.html" id="link1">My Homework Portfolio</a>
<a href="https://github.com/jesme00/jesme00.github.io" id="link1">My Github
</a>


<h1>What trick are we missing in tackling obesity?</h1>
    
    <!-- A div that contains a group of items for week 1. Can be useful for setting background colours etc.  -->
    <div class="myWeek1">     
        <h3>Obesity was historically considered an individual's health problem owing to poor diet and little exercise. Today there is growing evidence around its impact on society and the economy. Among the problems it's causing is its staggering costs for the NHS.    </h3>

         <div class="chart" id="Chart1"></div>
         <p2>
        <br>
        </p2>
         <p2>
         The y axis labels are long here, so I played around with offset, limit and padding tools in Vega to stop the bars themselves from sliding way off the right side of the page.</p2>
         
         <h3>How can we stop NHS costs attributable to obesity reaching these predictions?<h3>
           <p2>The aim of this project is to interrogate the relationship obesity has with other variables, looking to see if there are any that we might want to pay closer attention to when evaluating how best to go about solving this socioeconomic problem.
            <br>
            </p2>  
            </div> 
           
     <div class="myWeek1">
        <h3>Where are we now?<h3>
        <p2>The map below demonstrates the relative unsuccessful nature of efforts made so far, becoming increasingly darker between 2015 and 2020.   
        <br>
        </p2>   
          <div class="chart" id="Chart2"></div>         
          <p2>
        <br>  
          </p2>
          <p2>I used the <a href="https://fingertips.phe.org.uk/profile/guidance/supporting-information/api">PHE API package</a> to collect obesity data from <a href="https://fingertips.phe.org.uk/profile/health-profiles">their website</a> and made sure local authority boundary names matched to those in my GeoJSON file from <a href="https://geoportal.statistics.gov.uk/datasets/ons::lad-dec-2021-gb-bfc/explore?location=53.179829%2C-1.659691%2C6.09">the ONS</a> before combining the two in Vega, so it shows up for everywhere in England.
    <br>
</p2>  
               </div> 
             
     <div class="myWeek1">   
        <h3>What is obesity correlated with?</h3>
        <p2>Reducing obesity to a problem caused by physical inactivity and eating too many calories is unhelpful, when these two factors are determined by so many variables. There is a plethora of other health-related data available from the website, but comparing variables with obesity one by one would take forever. In the hope of exposing trends, I automated the collection of it by running the API to scrape all local-authority level data available.
          <br>
        </p2>
        <br>
        <p2>
        <br>
        </p2>
          <div class="chart" id="Chart3"></div>
          <br>
          <p2>
          <br>
          </p2>
        <p2>Cleaning this data was difficult, where health indicators were inconsistent in their age groups and time periods. Addressing this involved frequently printing the most and least common variable options to ensure I did not delete too much data purely because it didn’t align with the formatting of other datasets. I encountered an issue when trying to calculate correlations because Colab wanted to drop rows when columns had missing data, but this would have affected the number of inputs for other indicators in the table: I addressed this by using the =CORREL in Excel which ignored empty cells. Initially this chart moved right across the page because of the long names in the drop down. I have tried shortening names and removed the y axis title to resolve this, to part success.
            <br>
        </p2>
         
               </div>

    <div class="myWeek1">                 
        <h3>Do these correlations shed any new light?<h3> 
        <p2>Filtering out instances that being overweight is a by-product of another health complication or vice versa (e.g. <a href="https://www.nhs.uk/conditions/high-blood-pressure-hypertension/causes/#:~:text=Known%20causes%20of%20high%20blood%20pressure&text=kidney%20disease,during%20sleep%2C%20interrupting%20normal%20breathing">hypertension</a>), and dropping those indicative of exercise habits, the highest correlations the chart leaves behind largely relate to deprivation (e.g. affordability of home ownership, unpaid carers, weekly earnings, overcrowding). This is not surprising, where a healthy lifestyle is expensive to maintain and requires leisure time for exercise.
        </p2>
        <p2>
        <br>
        </p2>
        <div class="chart" id="Chart4"></div>
        <br>
        <p2>
        <br>
        </p2>
        <br>I used the same API to create this chart, this time collecting it across 6 years, to see how robust across time this relationship is. Although the R squared value is not particulary high, the rate of overweight and obese adults is clearly trending down in income, .</p2>

        </div>


     <div class="myWeek1">   
        <h3>Is there a case for policies that have been suggested?<h3> 
        <p2>Despite the correlations chart not shedding much new light, and remembering that a strong correlation is not enough to prove causation, the process of producing this chart was useful because it taught me the code necessary to clean data so that I can compare obesity rates with other data to evaluate whether or not existing suggested policies might be effective. For example, The government has looked into introducing policies <a href="https://www.gov.uk/government/publications/obesity-and-the-environment-briefing-regulating-the-growth-of-fast-food-outlets">regulating the growth of fast food outlets</a>. The chart below hints they might not be very useful.
    </p2>
        <p2>
        <br>
        </p2>
        <div class="chart" id="Chart5"></div>
        <br>
        <p2>
        <br>
        </p2>
        <p2>Despite the positive correlation, it is a very weak relationship, as shown by the poor fit of the regression line and low R squared value. This policy may not be a worthwhile endeavour to directly address obesity relative to others: arguably, it makes sense that this policy research paper was not taken further or updated since 2014.
            <br>
            Merging these two datasets was difficult because of some local authorities merging together between the two datasets being released: calculating density meant also calculating populations of the new boundary areas to divide the sum of outlets the by. I sped this process up in Excel. 
            </p2>
    </div>   
    
    
    <div class="myWeek1">     
        <h3>Conclusion<h3> 
            <p2>Having set out to find if there were any surprising correlations between obesity and other variables but being largely unsuccessful, my results instead reiterate the importance of acknowledging the symmetries between health inequality and income inequality, where policies addressing this may be the more effective kinds. Taking this further, I would like to load more variables into the correlations chart and track it across multiple years.
                </p2>
        </div>  
        

    <container>  
    <div class="references">

    <h1>References</h1>
    <p2>All map coordinate data comes from the ONS' <a href="https://geoportal.statistics.gov.uk/datasets/ons::lad-dec-2021-gb-bfc/explore?location=53.179829%2C-1.659691%2C6.09">Open Geography portal</a>. I made slight name changes to it before saving it <a href="https://github.com/jesme00/jesme00.github.io/blob/main/LAD21.json">in my GitHub</a>.</p2>
    
    <h3>Chart 1: Forecasted Costs of Elevated BMI</h3>
    <p2>Forecasted cost data - Government Office for Science's <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/287937/07-1184x-tackling-obesities-future-choices-report.pdf">'Tackling obesities: future choices'</a> report 
    <br>Colab notebook used to scrape PDF data - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/PDFScraper.ipynb">PDFScraper.ipynb</a>
    <br>Final CSV - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/Future%20costs%20of%20elevated%20BMI%20(%C2%A3%20billion%20per%20year).csv">Future costs of elevated BMI (£ billion per year).csv</a></p2>

    <h3>Chart 2: Percentage of Adults Classified as Overweight or Obese</h3>
    <p2>Obesity rate data - Office for Health Improvement and Disparities' <a href="https://fingertips.phe.org.uk/profile/health-profiles">Local Authority Health Profiles</a> 
    <br>Colab notebook used with API to collect and clean data - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/ObesityDataClean.ipynb">ObesityDataClean.ipynb</a>
    <br>Final CSV - <a href="https://raw.githubusercontent.com/jesme00/jesme00.github.io/main/adultsoverweightorobeselocalauthority.csv">adultsoverweightorobeselocalauthority.csv</a></p2>
    

    <h3>Chart 3: Correlations Between Obesity and Other Variables</h3>
    <p2>Health indicator data - Office for Health Improvement and Disparities' <a href="https://fingertips.phe.org.uk/profile/health-profiles">Local Authority Health Profiles</a>
    <br>Colab notebook used with API to collect and clean data - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/CleanandMergeHealthIndicatorData.ipynb">CleanandMergeHealthIndicatorData.ipynb</a>
    <br>Written commands for the notebook <a href="https://github.com/jesme00/jesme00.github.io/blob/main/HealthIndicatorDataCodesAvailableatLALevel2.xlsx">HealthIndicatorDataCodesAvailableatLALevel2.xlsx</a>
    <br>Compiled Excel Workbook of data by Local Authority - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/ObesityAndHealthIndicators.xlsx">ObesityAndHealthIndicators.xlsx</a>  
    <br>Final CSV - <a href="https://raw.githubusercontent.com/jesme00/jesme00.github.io/main/Correlations.csv">Correlations.csv</a></p2>
  

    <h3>Chart 4: Obesity and Average Weekly Earnings</h3>
    <p2>Obesity and Earnings data - Office for Health Improvement and Disparities' <a href="https://fingertips.phe.org.uk/profile/health-profiles">Local Authority Health Profiles</a> 
    <br>Colab notebook used with API to collect and clean data - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/AvWeeklyEarnings.ipynb">AvWeeklyEarnings.ipynb</a>
    <br>Final CSV - <a href="https://raw.githubusercontent.com/jesme00/jesme00.github.io/main/earningsandobesity.csv">adultsoverweightorobeselocalauthority.csv</a></p2>    


    <h3>Chart 5: Obesity and Fast Food Outlet Density</h3>
    <p2>Fast food outlet density data - <a href="https://www.gov.uk/government/publications/fast-food-outlets-density-by-local-authority-in-england">Public Health England</a>
    <br>2017 to 2021 Local Authority Matching done in Excel - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/LA%20Name%20Changes.xlsx">LA Name Changes.xlsx</a>        
    <br>Colab notebook used to clean obesity rate data for merging - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/ObesityandOutletDataMerged.ipynb">ObesityandOutletDataMerged.ipynb</a>
    <br>Final CSV - <a href="https://github.com/jesme00/jesme00.github.io/blob/main/FastFoodDensityAndObesity.csv">FastFoodDensityAndObesity.csv</a></p2>

</div> 
</container>

</body>


<script>

let width = screen.width;
if (width > 950) {
    myChart1 = "ProjectCharts/NHSForecastedCosts.json";
    myChart2 = "ProjectCharts/EnglandObesity.json"
    myChart3 = "ProjectCharts/Correlations.json";
    myChart4 = "ProjectCharts/earnings.json";   
    myChart5 = "ProjectCharts/FastFoodOutletregregression2.json";} 
    else {
    myChart1 = "ProjectCharts/NHSForecastedCostsSmall.json";
    myChart2 = "ProjectCharts/EnglandObesitySmall.json"
    myChart3 = "ProjectCharts/CorrelationsSmall.json";
    myChart4 = "ProjectCharts/earningsSmall.json";   
    myChart5 = "ProjectCharts/FastFoodOutletregregression2Small.json";}

    vegaEmbed('#Chart1', myChart1);
    vegaEmbed('#Chart2', myChart2);          
    vegaEmbed('#Chart3', myChart3);    
    vegaEmbed('#Chart4', myChart4);    
    vegaEmbed('#Chart5', myChart5);    
    
</script>

</html>
